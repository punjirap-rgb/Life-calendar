<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Life & Year Calendar</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 p-4">

<div class="max-w-4xl mx-auto text-center space-y-4">

  <h1 class="text-3xl font-bold">Life & Year Calendar</h1>

  <!-- Tab Buttons -->
  <div class="flex justify-center gap-2">
    <button id="lifeBtn" class="px-4 py-2 bg-black text-white rounded">Life</button>
    <button id="yearBtn" class="px-4 py-2 border rounded">Year</button>
  </div>

  <!-- Inputs -->
  <div class="flex justify-center gap-4">
    <div>
      <label class="block text-sm">Birth Date</label>
      <input id="birthDate" type="date" class="border rounded px-3 py-2">
    </div>
    <div>
      <label class="block text-sm">Life Expectancy (years)</label>
      <input id="lifeYears" type="number" value="90" class="border rounded px-3 py-2 w-24">
    </div>
    <button id="generate" class="bg-blue-600 text-white px-4 py-2 rounded">Generate</button>
  </div>

  <!-- Container for Views -->
  <div id="lifeView" class="">
    <!-- Life content goes here -->
  </div>
  <div id="yearView" class="hidden">
    <!-- Year content goes here -->
  </div>

</div>

<script>

// READ saved birth & life years
const birthInput = document.getElementById("birthDate");
const lifeYearsInput = document.getElementById("lifeYears");
birthInput.value = localStorage.getItem("birthDate") || "";
lifeYearsInput.value = localStorage.getItem("lifeYears") || 90;

const lifeView = document.getElementById("lifeView");
const yearView = document.getElementById("yearView");

// Utility
function weeksBetween(start, end) {
  return Math.floor((end - start) / (1000 * 60 * 60 * 24 * 7));
}

// RENDER LIFE
function renderLife() {
  const birthVal = birthInput.value;
  if (!birthVal) {
    lifeView.innerHTML = "<p class='text-red-600'>Please pick a birth date.</p>";
    return;
  }

  localStorage.setItem("birthDate", birthVal);
  localStorage.setItem("lifeYears", lifeYearsInput.value);

  const birthDate = new Date(birthVal);
  const now = new Date();
  const lifeYears = parseInt(lifeYearsInput.value) || 90;
  const totalWeeks = lifeYears * 52;

  const livedWeeks = Math.max(0, weeksBetween(birthDate, now));
  const percentage = ((livedWeeks / totalWeeks) * 100).toFixed(1);

  let html = `
    <div class="text-lg mb-2">
      You have lived <b>${livedWeeks}</b> of <b>${totalWeeks}</b> weeks
      (${percentage}%)
    </div>
    <div class="grid grid-cols-52 gap-1 justify-center"></div>
  `;

  lifeView.innerHTML = html;
  const grid = lifeView.querySelector("div.grid");

  for (let i = 0; i < totalWeeks; i++) {
    const square = document.createElement("div");
    square.className = i < livedWeeks ? "bg-gray-800 aspect-square rounded" : "bg-gray-200 aspect-square rounded";
    grid.appendChild(square);
  }
}

// RENDER YEAR
function renderYear() {
  const now = new Date();
  const year = now.getFullYear();
  const startOfYear = new Date(year, 0, 1);

  const dayOfYear = Math.floor((now - startOfYear) / (1000 * 60 * 60 * 24)) + 1;
  con
